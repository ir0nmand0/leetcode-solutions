<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 750" font-family="monospace">
  <defs>
    <linearGradient id="wg" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#89b4fa" stop-opacity="0.5"/>
      <stop offset="100%" stop-color="#74c7ec" stop-opacity="0.8"/>
    </linearGradient>
  </defs>

  <rect width="900" height="750" fill="#1e1e2e" rx="12"/>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" fill="#cdd6f4" font-size="17" font-weight="bold">42. Trapping Rain Water — Two Pointers</text>
  <text x="450" y="50" text-anchor="middle" fill="#a6adc8" font-size="12">height = [0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1] → вода = 6</text>
  <text x="450" y="68" text-anchor="middle" fill="#f38ba8" font-size="11">Вода — НЕ один бассейн между макс. стенками! Считаем поклеточно: каждая позиция = отдельная ямка.</text>

  <!-- Legend -->
  <rect x="240" y="78" width="14" height="12" fill="#585b70" stroke="#6c7086" stroke-width="1" rx="2"/>
  <text x="260" y="89" fill="#a6adc8" font-size="11">Блоки</text>
  <rect x="320" y="78" width="14" height="12" fill="url(#wg)" rx="2"/>
  <text x="340" y="89" fill="#a6adc8" font-size="11">Вода</text>
  <text x="410" y="89" fill="#a6e3a1" font-size="11">вода[i] = max_стенка − height[i]</text>

  <!-- Grid: y=120(3) y=160(2) y=200(1) y=240(0) -->
  <line x1="120" y1="240" x2="755" y2="240" stroke="#45475a" stroke-width="1"/>
  <line x1="120" y1="200" x2="755" y2="200" stroke="#313244" stroke-width="1" stroke-dasharray="4,4"/>
  <line x1="120" y1="160" x2="755" y2="160" stroke="#313244" stroke-width="1" stroke-dasharray="4,4"/>
  <line x1="120" y1="120" x2="755" y2="120" stroke="#313244" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Y-axis -->
  <text x="113" y="244" text-anchor="end" fill="#6c7086" font-size="11">0</text>
  <text x="113" y="204" text-anchor="end" fill="#6c7086" font-size="11">1</text>
  <text x="113" y="164" text-anchor="end" fill="#6c7086" font-size="11">2</text>
  <text x="113" y="124" text-anchor="end" fill="#6c7086" font-size="11">3</text>

  <!-- Water -->
  <rect x="234" y="200" width="45" height="40" fill="url(#wg)" rx="2"/>
  <text x="256" y="224" text-anchor="middle" fill="#1e1e2e" font-size="10" font-weight="bold">+1</text>
  <rect x="338" y="160" width="45" height="40" fill="url(#wg)" rx="2"/>
  <text x="360" y="184" text-anchor="middle" fill="#1e1e2e" font-size="10" font-weight="bold">+1</text>
  <rect x="390" y="160" width="45" height="80" fill="url(#wg)" rx="2"/>
  <text x="412" y="204" text-anchor="middle" fill="#1e1e2e" font-size="10" font-weight="bold">+2</text>
  <rect x="442" y="160" width="45" height="40" fill="url(#wg)" rx="2"/>
  <text x="464" y="184" text-anchor="middle" fill="#1e1e2e" font-size="10" font-weight="bold">+1</text>
  <rect x="598" y="160" width="45" height="40" fill="url(#wg)" rx="2"/>
  <text x="620" y="184" text-anchor="middle" fill="#1e1e2e" font-size="10" font-weight="bold">+1</text>

  <!-- Bars -->
  <rect x="130" y="238" width="45" height="2" fill="#45475a" rx="1"/>
  <rect x="182" y="200" width="45" height="40" fill="#585b70" stroke="#6c7086" stroke-width="1" rx="2"/>
  <rect x="234" y="238" width="45" height="2" fill="#45475a" rx="1"/>
  <rect x="286" y="160" width="45" height="80" fill="#585b70" stroke="#6c7086" stroke-width="1" rx="2"/>
  <rect x="338" y="200" width="45" height="40" fill="#585b70" stroke="#6c7086" stroke-width="1" rx="2"/>
  <rect x="390" y="238" width="45" height="2" fill="#45475a" rx="1"/>
  <rect x="442" y="200" width="45" height="40" fill="#585b70" stroke="#6c7086" stroke-width="1" rx="2"/>
  <rect x="494" y="120" width="45" height="120" fill="#585b70" stroke="#6c7086" stroke-width="1" rx="2"/>
  <rect x="546" y="160" width="45" height="80" fill="#585b70" stroke="#6c7086" stroke-width="1" rx="2"/>
  <rect x="598" y="200" width="45" height="40" fill="#585b70" stroke="#6c7086" stroke-width="1" rx="2"/>
  <rect x="650" y="160" width="45" height="80" fill="#585b70" stroke="#6c7086" stroke-width="1" rx="2"/>
  <rect x="702" y="200" width="45" height="40" fill="#585b70" stroke="#6c7086" stroke-width="1" rx="2"/>

  <!-- Index labels -->
  <text x="152" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">0</text>
  <text x="204" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">1</text>
  <text x="256" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">2</text>
  <text x="308" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">3</text>
  <text x="360" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">4</text>
  <text x="412" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">5</text>
  <text x="464" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">6</text>
  <text x="516" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">7</text>
  <text x="568" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">8</text>
  <text x="620" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">9</text>
  <text x="672" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">10</text>
  <text x="724" y="258" text-anchor="middle" fill="#a6adc8" font-size="10">11</text>

  <!-- Height labels -->
  <text x="152" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=0</text>
  <text x="204" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=1</text>
  <text x="256" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=0</text>
  <text x="308" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=2</text>
  <text x="360" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=1</text>
  <text x="412" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=0</text>
  <text x="464" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=1</text>
  <text x="516" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=3</text>
  <text x="568" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=2</text>
  <text x="620" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=1</text>
  <text x="672" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=2</text>
  <text x="724" y="272" text-anchor="middle" fill="#f5c2e7" font-size="9">h=1</text>

  <!-- Separator -->
  <line x1="40" y1="288" x2="860" y2="288" stroke="#313244" stroke-width="1"/>

  <!-- Step table title -->
  <text x="450" y="308" text-anchor="middle" fill="#cdd6f4" font-size="13" font-weight="bold">Пошаговое выполнение</text>

  <!-- Table header -->
  <rect x="40" y="316" width="820" height="22" fill="#313244" rx="3"/>
  <text x="63" y="331" text-anchor="middle" fill="#cdd6f4" font-size="10" font-weight="bold">#</text>
  <text x="125" y="331" text-anchor="middle" fill="#cdd6f4" font-size="10" font-weight="bold">L</text>
  <text x="185" y="331" text-anchor="middle" fill="#cdd6f4" font-size="10" font-weight="bold">R</text>
  <text x="275" y="331" text-anchor="middle" fill="#cdd6f4" font-size="10" font-weight="bold">h[L] vs h[R]</text>
  <text x="385" y="331" text-anchor="middle" fill="#cdd6f4" font-size="10" font-weight="bold">Двигаем</text>
  <text x="480" y="331" text-anchor="middle" fill="#cdd6f4" font-size="10" font-weight="bold">maxL</text>
  <text x="555" y="331" text-anchor="middle" fill="#cdd6f4" font-size="10" font-weight="bold">maxR</text>
  <text x="670" y="331" text-anchor="middle" fill="#cdd6f4" font-size="10" font-weight="bold">Расчёт</text>
  <text x="800" y="331" text-anchor="middle" fill="#cdd6f4" font-size="10" font-weight="bold">Итого</text>

  <!-- Water row highlights (blue tint) -->
  <rect x="40" y="410" width="820" height="24" fill="#89b4fa" opacity="0.1" rx="2"/>
  <rect x="40" y="458" width="820" height="24" fill="#89b4fa" opacity="0.1" rx="2"/>
  <rect x="40" y="530" width="820" height="24" fill="#89b4fa" opacity="0.1" rx="2"/>
  <rect x="40" y="554" width="820" height="24" fill="#89b4fa" opacity="0.1" rx="2"/>
  <rect x="40" y="578" width="820" height="24" fill="#89b4fa" opacity="0.1" rx="2"/>

  <!-- Row 1: L=0 R=11 h[0]=0 < h[11]=1 → L++ maxL=0 maxR=0 0-0=0 Σ=0 -->
  <text x="63"  y="356" text-anchor="middle" fill="#bac2de" font-size="10">1</text>
  <text x="125" y="356" text-anchor="middle" fill="#bac2de" font-size="10">0</text>
  <text x="185" y="356" text-anchor="middle" fill="#bac2de" font-size="10">11</text>
  <text x="275" y="356" text-anchor="middle" fill="#bac2de" font-size="10">0 &lt; 1</text>
  <text x="385" y="356" text-anchor="middle" fill="#a6e3a1" font-size="10">L++</text>
  <text x="480" y="356" text-anchor="middle" fill="#bac2de" font-size="10">0</text>
  <text x="555" y="356" text-anchor="middle" fill="#bac2de" font-size="10">0</text>
  <text x="670" y="356" text-anchor="middle" fill="#bac2de" font-size="10">0 - 0 = 0</text>
  <text x="800" y="356" text-anchor="middle" fill="#bac2de" font-size="10">0</text>

  <!-- Row 2: L=1 R=11 h[1]=1 >= h[11]=1 → R-- maxL=0 maxR=1 1-1=0 Σ=0 -->
  <text x="63"  y="380" text-anchor="middle" fill="#bac2de" font-size="10">2</text>
  <text x="125" y="380" text-anchor="middle" fill="#bac2de" font-size="10">1</text>
  <text x="185" y="380" text-anchor="middle" fill="#bac2de" font-size="10">11</text>
  <text x="275" y="380" text-anchor="middle" fill="#bac2de" font-size="10">1 ≥ 1</text>
  <text x="385" y="380" text-anchor="middle" fill="#fab387" font-size="10">R--</text>
  <text x="480" y="380" text-anchor="middle" fill="#bac2de" font-size="10">0</text>
  <text x="555" y="380" text-anchor="middle" fill="#bac2de" font-size="10">1</text>
  <text x="670" y="380" text-anchor="middle" fill="#bac2de" font-size="10">1 - 1 = 0</text>
  <text x="800" y="380" text-anchor="middle" fill="#bac2de" font-size="10">0</text>

  <!-- Row 3: L=1 R=10 h[1]=1 < h[10]=2 → L++ maxL=1 maxR=1 1-1=0 Σ=0 -->
  <text x="63"  y="404" text-anchor="middle" fill="#bac2de" font-size="10">3</text>
  <text x="125" y="404" text-anchor="middle" fill="#bac2de" font-size="10">1</text>
  <text x="185" y="404" text-anchor="middle" fill="#bac2de" font-size="10">10</text>
  <text x="275" y="404" text-anchor="middle" fill="#bac2de" font-size="10">1 &lt; 2</text>
  <text x="385" y="404" text-anchor="middle" fill="#a6e3a1" font-size="10">L++</text>
  <text x="480" y="404" text-anchor="middle" fill="#bac2de" font-size="10">1</text>
  <text x="555" y="404" text-anchor="middle" fill="#bac2de" font-size="10">1</text>
  <text x="670" y="404" text-anchor="middle" fill="#bac2de" font-size="10">1 - 1 = 0</text>
  <text x="800" y="404" text-anchor="middle" fill="#bac2de" font-size="10">0</text>

  <!-- Row 4: L=2 R=10 0 < 2 → L++ maxL=1 maxR=1 1-0=1 Σ=1 ★ -->
  <text x="63"  y="428" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">4</text>
  <text x="125" y="428" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">2</text>
  <text x="185" y="428" text-anchor="middle" fill="#89b4fa" font-size="10">10</text>
  <text x="275" y="428" text-anchor="middle" fill="#89b4fa" font-size="10">0 &lt; 2</text>
  <text x="385" y="428" text-anchor="middle" fill="#a6e3a1" font-size="10">L++</text>
  <text x="480" y="428" text-anchor="middle" fill="#89b4fa" font-size="10">1</text>
  <text x="555" y="428" text-anchor="middle" fill="#89b4fa" font-size="10">1</text>
  <text x="670" y="428" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">1 - 0 = 1</text>
  <text x="800" y="428" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">1</text>

  <!-- Row 5: L=3 R=10 2 >= 2 → R-- maxL=1 maxR=2 2-2=0 Σ=1 -->
  <text x="63"  y="452" text-anchor="middle" fill="#bac2de" font-size="10">5</text>
  <text x="125" y="452" text-anchor="middle" fill="#bac2de" font-size="10">3</text>
  <text x="185" y="452" text-anchor="middle" fill="#bac2de" font-size="10">10</text>
  <text x="275" y="452" text-anchor="middle" fill="#bac2de" font-size="10">2 ≥ 2</text>
  <text x="385" y="452" text-anchor="middle" fill="#fab387" font-size="10">R--</text>
  <text x="480" y="452" text-anchor="middle" fill="#bac2de" font-size="10">1</text>
  <text x="555" y="452" text-anchor="middle" fill="#bac2de" font-size="10">2</text>
  <text x="670" y="452" text-anchor="middle" fill="#bac2de" font-size="10">2 - 2 = 0</text>
  <text x="800" y="452" text-anchor="middle" fill="#bac2de" font-size="10">1</text>

  <!-- Row 6: L=3 R=9 2 >= 1 → R-- maxL=1 maxR=2 2-1=1 Σ=2 ★ -->
  <text x="63"  y="476" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">6</text>
  <text x="125" y="476" text-anchor="middle" fill="#89b4fa" font-size="10">3</text>
  <text x="185" y="476" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">9</text>
  <text x="275" y="476" text-anchor="middle" fill="#89b4fa" font-size="10">2 ≥ 1</text>
  <text x="385" y="476" text-anchor="middle" fill="#fab387" font-size="10">R--</text>
  <text x="480" y="476" text-anchor="middle" fill="#89b4fa" font-size="10">1</text>
  <text x="555" y="476" text-anchor="middle" fill="#89b4fa" font-size="10">2</text>
  <text x="670" y="476" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">2 - 1 = 1</text>
  <text x="800" y="476" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">2</text>

  <!-- Row 7: L=3 R=8 2 >= 2 → R-- maxL=1 maxR=2 2-2=0 Σ=2 -->
  <text x="63"  y="500" text-anchor="middle" fill="#bac2de" font-size="10">7</text>
  <text x="125" y="500" text-anchor="middle" fill="#bac2de" font-size="10">3</text>
  <text x="185" y="500" text-anchor="middle" fill="#bac2de" font-size="10">8</text>
  <text x="275" y="500" text-anchor="middle" fill="#bac2de" font-size="10">2 ≥ 2</text>
  <text x="385" y="500" text-anchor="middle" fill="#fab387" font-size="10">R--</text>
  <text x="480" y="500" text-anchor="middle" fill="#bac2de" font-size="10">1</text>
  <text x="555" y="500" text-anchor="middle" fill="#bac2de" font-size="10">2</text>
  <text x="670" y="500" text-anchor="middle" fill="#bac2de" font-size="10">2 - 2 = 0</text>
  <text x="800" y="500" text-anchor="middle" fill="#bac2de" font-size="10">2</text>

  <!-- Row 8: L=3 R=7 2 < 3 → L++ maxL=2 maxR=2 2-2=0 Σ=2 -->
  <text x="63"  y="524" text-anchor="middle" fill="#bac2de" font-size="10">8</text>
  <text x="125" y="524" text-anchor="middle" fill="#bac2de" font-size="10">3</text>
  <text x="185" y="524" text-anchor="middle" fill="#bac2de" font-size="10">7</text>
  <text x="275" y="524" text-anchor="middle" fill="#bac2de" font-size="10">2 &lt; 3</text>
  <text x="385" y="524" text-anchor="middle" fill="#a6e3a1" font-size="10">L++</text>
  <text x="480" y="524" text-anchor="middle" fill="#bac2de" font-size="10">2</text>
  <text x="555" y="524" text-anchor="middle" fill="#bac2de" font-size="10">2</text>
  <text x="670" y="524" text-anchor="middle" fill="#bac2de" font-size="10">2 - 2 = 0</text>
  <text x="800" y="524" text-anchor="middle" fill="#bac2de" font-size="10">2</text>

  <!-- Row 9: L=4 R=7 1 < 3 → L++ maxL=2 maxR=2 2-1=1 Σ=3 ★ -->
  <text x="63"  y="548" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">9</text>
  <text x="125" y="548" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">4</text>
  <text x="185" y="548" text-anchor="middle" fill="#89b4fa" font-size="10">7</text>
  <text x="275" y="548" text-anchor="middle" fill="#89b4fa" font-size="10">1 &lt; 3</text>
  <text x="385" y="548" text-anchor="middle" fill="#a6e3a1" font-size="10">L++</text>
  <text x="480" y="548" text-anchor="middle" fill="#89b4fa" font-size="10">2</text>
  <text x="555" y="548" text-anchor="middle" fill="#89b4fa" font-size="10">2</text>
  <text x="670" y="548" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">2 - 1 = 1</text>
  <text x="800" y="548" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">3</text>

  <!-- Row 10: L=5 R=7 0 < 3 → L++ maxL=2 maxR=2 2-0=2 Σ=5 ★ -->
  <text x="63"  y="572" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">10</text>
  <text x="125" y="572" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">5</text>
  <text x="185" y="572" text-anchor="middle" fill="#89b4fa" font-size="10">7</text>
  <text x="275" y="572" text-anchor="middle" fill="#89b4fa" font-size="10">0 &lt; 3</text>
  <text x="385" y="572" text-anchor="middle" fill="#a6e3a1" font-size="10">L++</text>
  <text x="480" y="572" text-anchor="middle" fill="#89b4fa" font-size="10">2</text>
  <text x="555" y="572" text-anchor="middle" fill="#89b4fa" font-size="10">2</text>
  <text x="670" y="572" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">2 - 0 = 2</text>
  <text x="800" y="572" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">5</text>

  <!-- Row 11: L=6 R=7 1 < 3 → L++ maxL=2 maxR=2 2-1=1 Σ=6 ★ -->
  <text x="63"  y="596" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">11</text>
  <text x="125" y="596" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">6</text>
  <text x="185" y="596" text-anchor="middle" fill="#89b4fa" font-size="10">7</text>
  <text x="275" y="596" text-anchor="middle" fill="#89b4fa" font-size="10">1 &lt; 3</text>
  <text x="385" y="596" text-anchor="middle" fill="#a6e3a1" font-size="10">L++</text>
  <text x="480" y="596" text-anchor="middle" fill="#89b4fa" font-size="10">2</text>
  <text x="555" y="596" text-anchor="middle" fill="#89b4fa" font-size="10">2</text>
  <text x="670" y="596" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">2 - 1 = 1</text>
  <text x="800" y="596" text-anchor="middle" fill="#89b4fa" font-size="10" font-weight="bold">6</text>

  <!-- Result -->
  <rect x="330" y="618" width="240" height="30" fill="#a6e3a1" opacity="0.12" rx="6" stroke="#a6e3a1" stroke-width="1" stroke-opacity="0.4"/>
  <text x="450" y="638" text-anchor="middle" fill="#a6e3a1" font-size="14" font-weight="bold">L = R = 7 → Ответ: 6</text>
</svg>
