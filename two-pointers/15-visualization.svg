<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   viewBox="0 0 850 1100"
   font-family="Consolas, monospace"
   version="1.1"
   id="svg143"
   sodipodi:docname="15-visualization.svg"
   inkscape:version="1.4.3 (0d15f75, 2025-12-25)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <defs
     id="defs143" />
  <sodipodi:namedview
     id="namedview143"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:zoom="0.74090909"
     inkscape:cx="447.42331"
     inkscape:cy="552.69939"
     inkscape:window-width="1920"
     inkscape:window-height="1017"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="svg143" />
  <style
     id="style1">
    .title { font-size: 18px; font-weight: bold; fill: #1a1a2e; }
    .step-label { font-size: 14px; font-weight: bold; fill: #16213e; }
    .cell { stroke: #334155; stroke-width: 2; rx: 6; }
    .cell-input { fill: #e2e8f0; }
    .cell-fixed { fill: #c4b5fd; }
    .cell-active-l { fill: #93c5fd; }
    .cell-active-r { fill: #fca5a5; }
    .cell-found { fill: #86efac; }
    .cell-skip { fill: #fde68a; stroke: #f59e0b; stroke-dasharray: 4,3; }
    .cell-dead { fill: #f1f5f9; }
    .val { font-size: 16px; text-anchor: middle; fill: #1e293b; font-weight: bold; }
    .val-dim { font-size: 16px; text-anchor: middle; fill: #94a3b8; font-weight: bold; }
    .idx { font-size: 11px; text-anchor: middle; fill: #94a3b8; }
    .pointer { font-size: 12px; text-anchor: middle; font-weight: bold; }
    .ptr-i { fill: #7c3aed; }
    .ptr-left { fill: #2563eb; }
    .ptr-right { fill: #dc2626; }
    .note { font-size: 12px; fill: #475569; }
    .note-bold { font-size: 13px; fill: #1e293b; font-weight: bold; }
    .sum-box { fill: #fef9c3; stroke: #ca8a04; stroke-width: 1.5; rx: 8; }
    .sum-text { font-size: 12px; text-anchor: middle; fill: #854d0e; font-weight: bold; }
    .verdict { font-size: 12px; fill: #475569; }
    .verdict-action { font-size: 12px; fill: #dc2626; font-weight: bold; }
    .verdict-found { font-size: 12px; fill: #059669; font-weight: bold; }
    .verdict-skip { font-size: 12px; fill: #d97706; font-weight: bold; }
    .divider { stroke: #cbd5e1; stroke-width: 1; stroke-dasharray: 4,4; }
    .skip-box { fill: #fef3c7; stroke: #f59e0b; stroke-width: 1.5; rx: 8; }
    .triplet { font-size: 13px; fill: #059669; font-weight: bold; }
  </style>
  <!-- Title -->
  <text
     x="425"
     y="30"
     text-anchor="middle"
     class="title"
     id="text1">15. 3Sum — Two Pointers + фиксированный элемент</text>
  <text
     x="425"
     y="50"
     text-anchor="middle"
     class="note"
     id="text2">Вход: [-1, 0, 1, 2, -1, -4] → Сортировка → [-4, -1, -1, 0, 1, 2], target = 0</text>
  <!-- ==================== i=0: no triplets ==================== -->
  <line
     x1="30"
     y1="68"
     x2="820"
     y2="68"
     class="divider"
     id="line2" />
  <text
     x="40"
     y="90"
     class="step-label"
     id="text3">i=0, nums[i]=-4</text>
  <text
     x="230"
     y="90"
     class="note"
     id="text4">Все суммы отрицательные — тройки нет</text>
  <g
     transform="translate(80, 100)"
     id="g23">
    <text
       x="35"
       y="0"
       class="idx"
       id="text5">0</text>
    <text
       x="105"
       y="0"
       class="idx"
       id="text6">1</text>
    <text
       x="175"
       y="0"
       class="idx"
       id="text7">2</text>
    <text
       x="245"
       y="0"
       class="idx"
       id="text8">3</text>
    <text
       x="315"
       y="0"
       class="idx"
       id="text9">4</text>
    <text
       x="385"
       y="0"
       class="idx"
       id="text10">5</text>
    <rect
       x="7"
       y="6"
       width="56"
       height="36"
       class="cell cell-fixed"
       id="rect10" />
    <rect
       x="77"
       y="6"
       width="56"
       height="36"
       class="cell cell-active-l"
       id="rect11" />
    <rect
       x="147"
       y="6"
       width="56"
       height="36"
       class="cell cell-input"
       id="rect12" />
    <rect
       x="217"
       y="6"
       width="56"
       height="36"
       class="cell cell-input"
       id="rect13" />
    <rect
       x="287"
       y="6"
       width="56"
       height="36"
       class="cell cell-input"
       id="rect14" />
    <rect
       x="357"
       y="6"
       width="56"
       height="36"
       class="cell cell-active-r"
       id="rect15" />
    <text
       x="35"
       y="30"
       class="val"
       id="text15">-4</text>
    <text
       x="105"
       y="30"
       class="val"
       id="text16">-1</text>
    <text
       x="175"
       y="30"
       class="val"
       id="text17">-1</text>
    <text
       x="245"
       y="30"
       class="val"
       id="text18">0</text>
    <text
       x="315"
       y="30"
       class="val"
       id="text19">1</text>
    <text
       x="385"
       y="30"
       class="val"
       id="text20">2</text>
    <text
       x="35"
       y="58"
       class="pointer ptr-i"
       id="text21">↑ i</text>
    <text
       x="105"
       y="58"
       class="pointer ptr-left"
       id="text22">↑ L</text>
    <text
       x="385"
       y="58"
       class="pointer ptr-right"
       id="text23">↑ R</text>
  </g>
  <rect
     x="530"
     y="106"
     width="270"
     height="36"
     class="sum-box"
     id="rect23" />
  <text
     x="665"
     y="120"
     class="sum-text"
     id="text24">-4 + (-1) + 2 = -3</text>
  <text
     x="613.71167"
     y="135"
     class="verdict"
     id="text25">-3 &lt; 0 → left++ ... все &lt; 0</text>
  <!-- ==================== i=1: first triplet ==================== -->
  <line
     x1="30"
     y1="170"
     x2="820"
     y2="170"
     class="divider"
     id="line25" />
  <text
     x="40"
     y="192"
     class="step-label"
     id="text26">i=1, nums[i]=-1</text>
  <text
     x="200"
     y="192"
     class="note"
     id="text27">left=2, right=5</text>
  <g
     transform="translate(80, 202)"
     id="g46">
    <text
       x="35"
       y="0"
       class="idx"
       id="text28">0</text>
    <text
       x="105"
       y="0"
       class="idx"
       id="text29">1</text>
    <text
       x="175"
       y="0"
       class="idx"
       id="text30">2</text>
    <text
       x="245"
       y="0"
       class="idx"
       id="text31">3</text>
    <text
       x="315"
       y="0"
       class="idx"
       id="text32">4</text>
    <text
       x="385"
       y="0"
       class="idx"
       id="text33">5</text>
    <rect
       x="7"
       y="6"
       width="56"
       height="36"
       class="cell cell-dead"
       id="rect33" />
    <rect
       x="77"
       y="6"
       width="56"
       height="36"
       class="cell cell-fixed"
       id="rect34" />
    <rect
       x="147"
       y="6"
       width="56"
       height="36"
       class="cell cell-active-l"
       id="rect35" />
    <rect
       x="217"
       y="6"
       width="56"
       height="36"
       class="cell cell-input"
       id="rect36" />
    <rect
       x="287"
       y="6"
       width="56"
       height="36"
       class="cell cell-input"
       id="rect37" />
    <rect
       x="357"
       y="6"
       width="56"
       height="36"
       class="cell cell-active-r"
       id="rect38" />
    <text
       x="35"
       y="30"
       class="val-dim"
       id="text38">-4</text>
    <text
       x="105"
       y="30"
       class="val"
       id="text39">-1</text>
    <text
       x="175"
       y="30"
       class="val"
       id="text40">-1</text>
    <text
       x="245"
       y="30"
       class="val"
       id="text41">0</text>
    <text
       x="315"
       y="30"
       class="val"
       id="text42">1</text>
    <text
       x="385"
       y="30"
       class="val"
       id="text43">2</text>
    <text
       x="105"
       y="58"
       class="pointer ptr-i"
       id="text44">↑ i</text>
    <text
       x="175"
       y="58"
       class="pointer ptr-left"
       id="text45">↑ L</text>
    <text
       x="385"
       y="58"
       class="pointer ptr-right"
       id="text46">↑ R</text>
  </g>
  <rect
     x="530"
     y="208"
     width="270"
     height="36"
     class="sum-box"
     id="rect46" />
  <text
     x="665"
     y="222"
     class="sum-text"
     id="text47">-1 + (-1) + 2 = 0</text>
  <text
     x="657.57666"
     y="237.67485"
     class="verdict-found"
     id="text48">ТРОЙКА [-1, -1, 2] ✓</text>
  <!-- ==================== i=1: after first triplet, skip dups ==================== -->
  <line
     x1="30"
     y1="268"
     x2="820"
     y2="268"
     class="divider"
     id="line48" />
  <text
     x="40"
     y="290"
     class="step-label"
     id="text49">Пропуск дубликатов</text>
  <text
     x="220"
     y="290"
     class="note"
     id="text50">left++→3, right--→4. Проверяем соседей:</text>
  <g
     transform="translate(80, 300)"
     id="g69">
    <text
       x="35"
       y="0"
       class="idx"
       id="text51">0</text>
    <text
       x="105"
       y="0"
       class="idx"
       id="text52">1</text>
    <text
       x="175"
       y="0"
       class="idx"
       id="text53">2</text>
    <text
       x="245"
       y="0"
       class="idx"
       id="text54">3</text>
    <text
       x="315"
       y="0"
       class="idx"
       id="text55">4</text>
    <text
       x="385"
       y="0"
       class="idx"
       id="text56">5</text>
    <rect
       x="7"
       y="6"
       width="56"
       height="36"
       class="cell cell-dead"
       id="rect56" />
    <rect
       x="77"
       y="6"
       width="56"
       height="36"
       class="cell cell-fixed"
       id="rect57" />
    <rect
       x="147"
       y="6"
       width="56"
       height="36"
       class="cell cell-dead"
       id="rect58" />
    <rect
       x="217"
       y="6"
       width="56"
       height="36"
       class="cell cell-active-l"
       id="rect59" />
    <rect
       x="287"
       y="6"
       width="56"
       height="36"
       class="cell cell-active-r"
       id="rect60" />
    <rect
       x="357"
       y="6"
       width="56"
       height="36"
       class="cell cell-dead"
       id="rect61" />
    <text
       x="35"
       y="30"
       class="val-dim"
       id="text61">-4</text>
    <text
       x="105"
       y="30"
       class="val"
       id="text62">-1</text>
    <text
       x="175"
       y="30"
       class="val-dim"
       id="text63">-1</text>
    <text
       x="245"
       y="30"
       class="val"
       id="text64">0</text>
    <text
       x="315"
       y="30"
       class="val"
       id="text65">1</text>
    <text
       x="385"
       y="30"
       class="val-dim"
       id="text66">2</text>
    <text
       x="105"
       y="58"
       class="pointer ptr-i"
       id="text67">↑ i</text>
    <text
       x="245"
       y="58"
       class="pointer ptr-left"
       id="text68">↑ L</text>
    <text
       x="315"
       y="58"
       class="pointer ptr-right"
       id="text69">↑ R</text>
  </g>
  <rect
     x="530"
     y="306"
     width="270"
     height="48"
     class="skip-box"
     id="rect69" />
  <text
     x="665"
     y="318.62576"
     class="sum-text"
     id="text70">nums[3]=0 ≠ nums[2]=-1 → ок</text>
  <text
     x="660.95093"
     y="334.60123"
     class="sum-text"
     id="text71">nums[4]=1 ≠ nums[5]=2 → ок</text>
  <text
     x="625.18402"
     y="349.95093"
     class="note"
     id="text72">Дубликатов нет, продолжаем</text>
  <!-- ==================== i=1: second triplet ==================== -->
  <line
     x1="30"
     y1="372"
     x2="820"
     y2="372"
     class="divider"
     id="line72" />
  <text
     x="40"
     y="394"
     class="step-label"
     id="text73">i=1 (продолжение)</text>
  <text
     x="210"
     y="394"
     class="note"
     id="text74">left=3, right=4</text>
  <g
     transform="translate(80, 404)"
     id="g93">
    <text
       x="35"
       y="0"
       class="idx"
       id="text75">0</text>
    <text
       x="105"
       y="0"
       class="idx"
       id="text76">1</text>
    <text
       x="175"
       y="0"
       class="idx"
       id="text77">2</text>
    <text
       x="245"
       y="0"
       class="idx"
       id="text78">3</text>
    <text
       x="315"
       y="0"
       class="idx"
       id="text79">4</text>
    <text
       x="385"
       y="0"
       class="idx"
       id="text80">5</text>
    <rect
       x="7"
       y="6"
       width="56"
       height="36"
       class="cell cell-dead"
       id="rect80" />
    <rect
       x="77"
       y="6"
       width="56"
       height="36"
       class="cell cell-fixed"
       id="rect81" />
    <rect
       x="147"
       y="6"
       width="56"
       height="36"
       class="cell cell-dead"
       id="rect82" />
    <rect
       x="217"
       y="6"
       width="56"
       height="36"
       class="cell cell-found"
       id="rect83" />
    <rect
       x="287"
       y="6"
       width="56"
       height="36"
       class="cell cell-found"
       id="rect84" />
    <rect
       x="357"
       y="6"
       width="56"
       height="36"
       class="cell cell-dead"
       id="rect85" />
    <text
       x="35"
       y="30"
       class="val-dim"
       id="text85">-4</text>
    <text
       x="105"
       y="30"
       class="val"
       id="text86">-1</text>
    <text
       x="175"
       y="30"
       class="val-dim"
       id="text87">-1</text>
    <text
       x="245"
       y="30"
       class="val"
       id="text88">0</text>
    <text
       x="315"
       y="30"
       class="val"
       id="text89">1</text>
    <text
       x="385"
       y="30"
       class="val-dim"
       id="text90">2</text>
    <text
       x="105"
       y="58"
       class="pointer ptr-i"
       id="text91">↑ i</text>
    <text
       x="245"
       y="58"
       class="pointer ptr-left"
       id="text92">↑ L</text>
    <text
       x="315"
       y="58"
       class="pointer ptr-right"
       id="text93">↑ R</text>
  </g>
  <rect
     x="530"
     y="410"
     width="270"
     height="36"
     class="sum-box"
     id="rect93" />
  <text
     x="665"
     y="424"
     class="sum-text"
     id="text94">-1 + 0 + 1 = 0</text>
  <text
     x="665"
     y="439"
     class="verdict-found"
     id="text95">ТРОЙКА [-1, 0, 1] ✓</text>
  <!-- ==================== i=1: while ends ==================== -->
  <text
     x="494.23312"
     y="466.65033"
     class="note"
     id="text96">left++→4, right--→3 → left ≥ right → while закончился</text>
  <!-- ==================== i=2: DUPLICATE SKIP ==================== -->
  <line
     x1="30"
     y1="485"
     x2="820"
     y2="485"
     class="divider"
     id="line96" />
  <text
     x="40"
     y="507"
     class="step-label"
     id="text97">i=2, nums[i]=-1</text>
  <text
     x="200"
     y="507"
     class="verdict-skip"
     id="text98">← ПРОПУСК! nums[2] == nums[1] → continue</text>
  <g
     transform="translate(80, 517)"
     id="g115">
    <text
       x="35"
       y="0"
       class="idx"
       id="text99">0</text>
    <text
       x="105"
       y="0"
       class="idx"
       id="text100">1</text>
    <text
       x="175"
       y="0"
       class="idx"
       id="text101">2</text>
    <text
       x="245"
       y="0"
       class="idx"
       id="text102">3</text>
    <text
       x="315"
       y="0"
       class="idx"
       id="text103">4</text>
    <text
       x="385"
       y="0"
       class="idx"
       id="text104">5</text>
    <rect
       x="7"
       y="6"
       width="56"
       height="36"
       class="cell cell-dead"
       id="rect104" />
    <rect
       x="77"
       y="6"
       width="56"
       height="36"
       class="cell cell-dead"
       id="rect105" />
    <rect
       x="147"
       y="6"
       width="56"
       height="36"
       class="cell cell-skip"
       id="rect106" />
    <rect
       x="217"
       y="6"
       width="56"
       height="36"
       class="cell cell-input"
       id="rect107" />
    <rect
       x="287"
       y="6"
       width="56"
       height="36"
       class="cell cell-input"
       id="rect108" />
    <rect
       x="357"
       y="6"
       width="56"
       height="36"
       class="cell cell-input"
       id="rect109" />
    <text
       x="35"
       y="30"
       class="val-dim"
       id="text109">-4</text>
    <text
       x="105"
       y="30"
       class="val-dim"
       id="text110">-1</text>
    <text
       x="175"
       y="30"
       class="val"
       id="text111">-1</text>
    <text
       x="245"
       y="30"
       class="val"
       id="text112">0</text>
    <text
       x="315"
       y="30"
       class="val"
       id="text113">1</text>
    <text
       x="385"
       y="30"
       class="val"
       id="text114">2</text>
    <text
       x="175"
       y="58"
       class="pointer ptr-i"
       id="text115">↑ i</text>
  </g>
  <rect
     x="530"
     y="523"
     width="270"
     height="36"
     class="skip-box"
     id="rect115" />
  <text
     x="604.26379"
     y="537.32513"
     class="verdict-skip"
     id="text116">-1 == -1 → всё что найдёт i=2,</text>
  <text
     x="665"
     y="553"
     class="verdict-skip"
     id="text117">уже нашёл i=1 → skip</text>
  <!-- ==================== i=3,4,5: nothing ==================== -->
  <line
     x1="30"
     y1="580"
     x2="820"
     y2="580"
     class="divider"
     id="line117" />
  <text
     x="40"
     y="602"
     class="step-label"
     id="text118">i=3 (0), i=4 (1), i=5 (2)</text>
  <text
     x="280"
     y="602"
     class="note"
     id="text119">Все суммы положительные — троек нет</text>
  <!-- ==================== RESULT ==================== -->
  <line
     x1="30"
     y1="622"
     x2="820"
     y2="622"
     class="divider"
     id="line119" />
  <text
     x="425"
     y="650"
     text-anchor="middle"
     class="step-label"
     id="text120">Результат</text>
  <text
     x="425"
     y="675"
     text-anchor="middle"
     class="triplet"
     id="text121">[[-1, -1, 2], [-1, 0, 1]]</text>
  <!-- ==================== 3 SKIP ZONES ==================== -->
  <line
     x1="30"
     y1="695"
     x2="820"
     y2="695"
     class="divider"
     id="line121" />
  <text
     x="425"
     y="720"
     text-anchor="middle"
     class="step-label"
     id="text122">Три защиты от дубликатов</text>
  <g
     transform="translate(30, 735)"
     id="g126">
    <rect
       x="0"
       y="0"
       width="250"
       height="80"
       rx="10"
       fill="#f5f3ff"
       stroke="#c4b5fd"
       stroke-width="1.5"
       id="rect122" />
    <text
       x="125"
       y="20"
       text-anchor="middle"
       class="note-bold"
       id="text123">Фиксированный i</text>
    <text
       x="125"
       y="38"
       text-anchor="middle"
       class="note"
       id="text124">nums[i] == nums[i-1]?</text>
    <text
       x="125"
       y="54"
       text-anchor="middle"
       class="note"
       id="text125">Да → continue</text>
    <text
       x="125"
       y="70"
       text-anchor="middle"
       class="note"
       id="text126">Тот же i → те же тройки</text>
  </g>
  <g
     transform="translate(295, 735)"
     id="g130">
    <rect
       x="0"
       y="0"
       width="250"
       height="80"
       rx="10"
       fill="#dbeafe"
       stroke="#93c5fd"
       stroke-width="1.5"
       id="rect126" />
    <text
       x="125"
       y="20"
       text-anchor="middle"
       class="note-bold"
       id="text127">Left после тройки</text>
    <text
       x="125"
       y="38"
       text-anchor="middle"
       class="note"
       id="text128">nums[left] == nums[left-1]?</text>
    <text
       x="125"
       y="54"
       text-anchor="middle"
       class="note"
       id="text129">Да → left++</text>
    <text
       x="125"
       y="70"
       text-anchor="middle"
       class="note"
       id="text130">Тот же left → та же тройка</text>
  </g>
  <g
     transform="translate(560, 735)"
     id="g134">
    <rect
       x="0"
       y="0"
       width="250"
       height="80"
       rx="10"
       fill="#fee2e2"
       stroke="#fca5a5"
       stroke-width="1.5"
       id="rect130" />
    <text
       x="125"
       y="20"
       text-anchor="middle"
       class="note-bold"
       id="text131">Right после тройки</text>
    <text
       x="125"
       y="38"
       text-anchor="middle"
       class="note"
       id="text132">nums[right] == nums[right+1]?</text>
    <text
       x="125"
       y="54"
       text-anchor="middle"
       class="note"
       id="text133">Да → right--</text>
    <text
       x="125"
       y="70"
       text-anchor="middle"
       class="note"
       id="text134">Тот же right → та же тройка</text>
  </g>
  <!-- ==================== LEGEND ==================== -->
  <line
     x1="30"
     y1="835"
     x2="820"
     y2="835"
     class="divider"
     id="line134" />
  <text
     x="425"
     y="860"
     text-anchor="middle"
     class="step-label"
     id="text135">Легенда</text>
  <rect
     x="50"
     y="872"
     width="24"
     height="18"
     class="cell cell-fixed"
     rx="4"
     id="rect135" />
  <text
     x="84"
     y="886"
     class="note"
     id="text136">Фиксированный i</text>
  <rect
     x="210"
     y="872"
     width="24"
     height="18"
     class="cell cell-active-l"
     rx="4"
     id="rect136" />
  <text
     x="244"
     y="886"
     class="note"
     id="text137">Left</text>
  <rect
     x="310"
     y="872"
     width="24"
     height="18"
     class="cell cell-active-r"
     rx="4"
     id="rect137" />
  <text
     x="344"
     y="886"
     class="note"
     id="text138">Right</text>
  <rect
     x="420"
     y="872"
     width="24"
     height="18"
     class="cell cell-found"
     rx="4"
     id="rect138" />
  <text
     x="454"
     y="886"
     class="note"
     id="text139">Найдено</text>
  <rect
     x="540"
     y="872"
     width="24"
     height="18"
     class="cell cell-skip"
     rx="4"
     id="rect139" />
  <text
     x="574"
     y="886"
     class="note"
     id="text140">Пропуск (дубликат)</text>
  <rect
     x="710"
     y="872"
     width="24"
     height="18"
     class="cell cell-dead"
     rx="4"
     id="rect140" />
  <text
     x="744"
     y="886"
     class="note"
     id="text141">Неактивно</text>
  <!-- Footer -->
  <text
     x="425"
     y="920"
     text-anchor="middle"
     class="note"
     id="text142">Время: O(n²) — цикл O(n) × Two Pointers O(n). Память: O(n) — результат.</text>
  <text
     x="425"
     y="940"
     text-anchor="middle"
     class="note"
     id="text143">Сортировка O(n log n) поглощается O(n²). Три skip'а дубликатов — один приём в трёх местах.</text>
</svg>
